# 운영 거버넌스 & 비개발자 관리 구조

## 핵심 원칙

- **비개발자가 직접 관리할 수 있어야 한다**: Google Sheets 편집만으로 봇 동작 변경
- **규정 변경 시 즉시 반영**: Google Sheets 수정 → 다음 문의부터 반영 (배포 불필요)
- **코드 수정 없이 운영 가능한 구조**: FAQ/규정/담당자 데이터는 모두 시트 기반

---

## 1. 비개발자 관리 가능 영역

### 코드 수정 없이 할 수 있는 것 (Google Sheets만 편집)

| 작업 | 시트 | 방법 | 반영 시점 |
|------|------|------|----------|
| FAQ 추가/수정/삭제 | FAQ | 행 추가/편집/isActive를 FALSE | 즉시 |
| 규정 데이터 추가/수정 | 규정_인사/총무/회계 | 행 추가/편집 | 즉시 |
| 담당자 정보 변경 | 담당자 | 행 편집 | 즉시 |
| FAQ 비활성화 (일시 중지) | FAQ | isActive를 FALSE로 변경 | 즉시 |
| 새 소분류 추가 | 담당자 | 행 추가 (새 subCategory) | 즉시 |

### 개발자가 해야 하는 것 (n8n 워크플로우 수정)

| 작업 | 빈도 |
|------|------|
| 새 대분류 카테고리 추가 (예: 법무) | 매우 드묾 |
| 프롬프트 튜닝 | 초기에만, 안정화 후 드묾 |
| n8n 노드 로직 변경 | 기능 확장 시에만 |
| 에러 대응 | 장애 발생 시 |

---

## 2. FAQ 관리 프로세스

### FAQ 추가 플로우

```
[에스컬레이션 발생]
    ↓
[대시보드에서 TOP 에스컬레이션 질문 확인] — 주 1회
    ↓
[경영지원 담당자가 답변 작성]
    ↓
[FAQ 시트에 새 행 추가]
    ├─ faqId: 규칙에 맞게 부여 (FAQ-HR-004 등)
    ├─ keywords: 사용자가 실제 쓰는 단어로 등록
    ├─ answer: 구체적이고 실행 가능한 답변
    ├─ source: 근거 규정
    └─ isActive: TRUE
    ↓
[다음 동일 질문 → Tier 1 즉시 응답]
```

### FAQ 작성 가이드 (비개발자용)

**keywords 작성법:**
- 사용자가 실제로 입력할 단어를 쉼표로 나열
- 구어체 포함: "연차", "남은연차", "연차 몇일", "휴가 남은거"
- 많을수록 좋음 (오탐보다 미탐이 더 문제)

**answer 작성법:**
- "~에서 ~하시면 됩니다" 형태로 구체적으로
- 경로가 있으면 경로 포함: "네이버웍스 > 근태관리 > 휴가신청"
- 기한/금액/조건 등 수치 반드시 포함
- 200자 이내 권장

**하지 말아야 할 것:**
- 컬럼 순서 변경 (n8n이 컬럼명으로 읽으므로)
- 컬럼 헤더 이름 변경
- 빈 행 삽입 (중간에 빈 행이 있으면 읽기 중단될 수 있음)

---

## 3. 규정 데이터 관리 프로세스

### 규정 변경 시

```
[사내 규정 변경 공지]
    ↓
[경영지원 담당자가 해당 규정 시트 수정]
    ├─ 기존 행 수정 (내용/시행일 업데이트)
    ├─ 또는 새 행 추가 (새 조항)
    └─ lastUpdated 날짜 갱신
    ↓
[다음 문의부터 변경된 규정으로 답변]
```

### 규정 데이터 작성 가이드 (비개발자용)

**content 작성법:**
- 한 행 = 한 조항 (너무 긴 조항은 항목별로 분리)
- 핵심 수치 반드시 포함 (금액, 기간, 기한)
- 500자 이내 권장 (너무 길면 Gemini 성능 저하)

**tags 작성법:**
- 이 조항과 관련된 키워드를 쉼표로 나열
- 사용자가 물어볼 만한 단어 위주: "연차,부여,일수,15일"

**규정 삭제 시:**
- 행을 삭제하지 말고 내용에 "(폐지)" 또는 "(개정: REG-HR-XXX으로 대체)" 표기
- 이력 추적을 위해 행 자체는 유지 권장

---

## 4. 담당자 정보 관리

### 변경 시나리오

| 상황 | 조치 |
|------|------|
| 담당자 변경 | 해당 행의 name, contact, email 수정 |
| 새 업무 영역 추가 | 새 행 추가 (category, subCategory 기입) |
| 담당자 부재 (휴가 등) | note에 "2/19-2/23 부재, OOO 대리 문의" 기입 |

---

## 5. 운영 루틴

### 주간 루틴 (경영지원 실무자, 15-30분)

| 항목 | 작업 |
|------|------|
| 에스컬레이션 TOP 질문 확인 | 대시보드에서 확인 → FAQ 추가 검토 |
| 답변 품질 스팟체크 | 대화이력에서 무작위 5-10건 확인 |
| FAQ 보강 | 에스컬레이션 빈도 높은 질문을 FAQ로 등록 |

### 월간 루틴 (운영 담당자, 1-2시간)

| 항목 | 작업 |
|------|------|
| 월간 성과 리포트 확인 | 대시보드_월간 시트 |
| 규정 업데이트 반영 확인 | 해당 월 규정 변경 사항 누락 없는지 |
| 대화이력 아카이빙 | 30일 이상 된 대화이력 → 아카이브 시트 이동 |
| 운영로그 아카이빙 | 90일 이상 된 로그 → 아카이브 시트 이동 |
| API 비용 확인 | Google AI Studio 대시보드 |

### 분기 루틴 (리더, 30분)

| 항목 | 작업 |
|------|------|
| ROI 리뷰 | 절감 비용 vs 운영 비용 |
| 확대 검토 | 다른 부서/업무 영역 확장 여부 |
| 사용자 피드백 종합 | 정성적 피드백 수집 및 반영 |

---

## 6. 권한 설계

### Google Sheets 공유 권한

| 대상 | 권한 | 범위 |
|------|------|------|
| 봇 서비스 계정 (n8n) | 편집자 | 전체 시트 (읽기/쓰기) |
| 경영지원 실무자 | 편집자 | FAQ, 규정, 담당자 시트 |
| 경영지원 리더 | 뷰어 | 대시보드 시트 |
| 전략기획 (운영 담당) | 편집자 | 전체 시트 |

### 시트 보호 (실수 방지)

| 시트 | 보호 설정 |
|------|----------|
| 운영로그 | 봇 서비스 계정 + 전략기획만 편집 가능 (실무자 수동 편집 방지) |
| 대화이력 | 봇 서비스 계정만 편집 가능 |
| 대시보드 | 전략기획만 편집 가능 (수식 보호) |
| FAQ/규정/담당자 | 경영지원 실무자 + 전략기획 편집 가능 |
| 모든 시트 헤더 행 | 편집 잠금 (컬럼 헤더 변경 방지) |

---

## 7. 장애 대응

### 봇이 응답하지 않을 때

```
1. n8n 서버 상태 확인 (n8n 대시보드 접속)
2. 워크플로우 활성화 여부 확인 (비활성화 되었을 수 있음)
3. 네이버웍스 Developer Console → Bot 상태 확인
4. n8n Execution 로그에서 에러 확인
5. 해결 안 되면 → 전략기획(개발 담당)에게 연락
```

### 봇이 틀린 답변을 할 때

```
1. 대화이력에서 해당 대화 확인
2. FAQ에 해당 질문이 있는지 확인
   - 있으면 → FAQ 답변 수정
   - 없으면 → 규정 데이터 확인 후 FAQ 추가
3. 규정 데이터가 오래된 경우 → 규정 시트 업데이트
```
