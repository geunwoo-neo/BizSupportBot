# 개발 플랜

## 전체 일정 (약 3주)

```
Week 1: 인프라 + 데이터 준비
Week 2: 핵심 로직 구현
Week 3: 테스트 + 파일럿 배포
```

---

## Phase 1: 인프라 세팅 (Day 1-2)

### 목표
네이버웍스 봇 ↔ n8n 간 메시지 송수신 확인 (에코봇 수준)

### 작업 항목

| # | 작업 | 담당 | 산출물 |
|---|------|------|--------|
| 1-1 | 네이버웍스 Developer Console에서 Bot 생성 | 본인 | Bot ID, Callback URL 설정 |
| 1-2 | Service Account 생성 + Private Key 발급 | 본인 (관리자 권한 필요) | Client ID/Secret, SA, Key |
| 1-3 | n8n에 Webhook 워크플로우 생성 | 본인 | Webhook URL |
| 1-4 | 네이버웍스 Bot Callback URL에 n8n Webhook 등록 | 본인 | 봇-n8n 연결 완료 |
| 1-5 | 에코봇 테스트: 메시지 수신 → 그대로 응답 | 본인 | 스크린샷 |
| 1-6 | Gemini API Key 발급 (Google AI Studio) | 본인 | API Key |

### 완료 기준
- 네이버웍스에서 봇에 메시지 보내면 n8n에서 수신 확인
- n8n에서 네이버웍스로 응답 메시지 전송 확인
- Gemini API 단독 호출 테스트 성공

### 주의사항
- 네이버웍스 봇 생성에는 **관리자 권한**이 필요할 수 있음 → IT팀/관리자 협조
- n8n Webhook URL이 외부에서 접근 가능해야 함 (사내 네트워크 방화벽 확인)

---

## Phase 2: 데이터 구조화 (Day 3-5)

### 목표
Google Sheets에 규정/FAQ/담당자 데이터 입력 완료

### 작업 항목

| # | 작업 | 담당 | 산출물 |
|---|------|------|--------|
| 2-1 | Google Sheets 파일 생성 (BizSupportBot_Data) | 본인 | 스프레드시트 |
| 2-2 | 시트 구조 생성 (6개 시트, 컬럼 헤더) | 본인 | 02-data-structure.md 기준 |
| 2-3 | FAQ 초안 작성 — 인사 카테고리 | 경영지원(인사) | FAQ 20-30건 |
| 2-4 | FAQ 초안 작성 — 총무 카테고리 | 경영지원(총무) | FAQ 20-30건 |
| 2-5 | FAQ 초안 작성 — 회계 카테고리 | 경영지원(회계) | FAQ 20-30건 |
| 2-6 | 규정 데이터 입력 — 디지털화된 규정 옮기기 | 본인 + 경영지원 | 규정 시트 |
| 2-7 | 규정 데이터 입력 — 신규 디지털화 | 경영지원 | 규정 시트 |
| 2-8 | 담당자 정보 입력 | 경영지원 | 담당자 시트 |
| 2-9 | n8n ↔ Google Sheets 연동 테스트 | 본인 | 읽기/쓰기 확인 |

### 완료 기준
- 카테고리별 FAQ 최소 10건 이상 입력
- 주요 규정 데이터 입력 (완벽하지 않아도 됨, 추후 보강)
- n8n에서 Google Sheets 읽기/쓰기 정상 동작

### 핵심 포인트
- FAQ 작성이 **전체 프로젝트의 품질을 결정**함 → 경영지원팀과 협업 필수
- "실제 임직원이 묻는 질문"을 수집하는 것이 핵심 (이상적 질문 X)
- 기존 문의 이력(메일, 메신저 등)이 있다면 거기서 FAQ 추출

---

## Phase 3: 핵심 로직 구현 (Day 6-10)

### 목표
전체 워크플로우 완성 (FAQ 매칭 → Gemini 응답 → 에스컬레이션)

### 작업 항목

| # | 작업 | 산출물 |
|---|------|--------|
| 3-1 | 메인 워크플로우 기본 틀 구축 (Webhook → 파싱 → 응답) | n8n 워크플로우 |
| 3-2 | FAQ 매칭 로직 구현 (Node 4-7) | FAQ 즉시 응답 동작 |
| 3-3 | Gemini 의도 분류 구현 (Node 8) | 카테고리 분류 동작 |
| 3-4 | 규정 조회 + Gemini 응답 생성 구현 (Node 12-14) | 규정 기반 응답 동작 |
| 3-5 | 에스컬레이션 로직 구현 (Node 10-11) | 담당자 안내 동작 |
| 3-6 | 멀티턴 대화 이력 관리 구현 (Node 3, 15) | 맥락 유지 대화 동작 |
| 3-7 | 인증 서브 워크플로우 구현 | 토큰 발급 자동화 |
| 3-8 | 에러 핸들링 추가 | 에러 시 안내 메시지 |
| 3-9 | 시스템 프롬프트 초안 적용 | prompts/system-prompt.md |

### 구현 순서 (의존성 고려)

```
3-1 기본 틀 ──→ 3-7 인증 ──→ 3-2 FAQ 매칭 (먼저 완성 → 바로 테스트 가능)
                                  ↓
                             3-3 의도 분류
                                  ↓
                             3-4 응답 생성
                                  ↓
                             3-5 에스컬레이션
                                  ↓
                             3-6 멀티턴
                                  ↓
                             3-8 에러 핸들링
```

### 완료 기준
- FAQ 질문 → Tier 1 즉시 응답 정상
- 규정 기반 질문 → Tier 2 Gemini 응답 정상
- 답변 불가 질문 → Tier 3 에스컬레이션 안내 정상
- 후속 질문 시 이전 맥락 반영 확인
- 에러 시 사용자 안내 메시지 전송 확인

---

## Phase 4: 프롬프트 튜닝 + 테스트 (Day 11-13)

### 목표
응답 품질을 실무 수준으로 끌어올리기

### 작업 항목

| # | 작업 | 산출물 |
|---|------|--------|
| 4-1 | 테스트 시나리오 작성 (카테고리별 10개씩) | 테스트 케이스 문서 |
| 4-2 | Tier 1 테스트: FAQ 매칭 정확도 확인 | 매칭 결과 리포트 |
| 4-3 | Tier 2 테스트: Gemini 응답 품질 확인 | 응답 품질 리포트 |
| 4-4 | Tier 3 테스트: 에스컬레이션 적절성 확인 | 에스컬레이션 리포트 |
| 4-5 | 멀티턴 시나리오 테스트 | 멀티턴 결과 리포트 |
| 4-6 | 시스템 프롬프트 튜닝 (테스트 결과 기반) | 프롬프트 v2 |
| 4-7 | 엣지 케이스 처리 추가 | 업데이트된 워크플로우 |
| 4-8 | FAQ/규정 데이터 보강 (테스트 중 발견된 갭) | 업데이트된 시트 |

### 테스트 시나리오 예시

| 카테고리 | 시나리오 | 기대 결과 |
|---------|---------|----------|
| 인사 | "연차 며칠 남았어?" | Tier 1 FAQ 응답 |
| 인사 | "육아휴직 신청 절차가 어떻게 돼?" | Tier 2 규정 기반 응답 |
| 인사 | "연차 남았어?" → "그럼 신청은?" | 멀티턴 맥락 유지 |
| 회계 | "법인카드 해외 결제 가능해?" | Tier 2 규정 기반 응답 |
| 기타 | "오늘 점심 뭐야?" | Tier 3 에스컬레이션 또는 범위 외 안내 |
| 엣지 | 빈 메시지 / 이미지 전송 | 적절한 안내 메시지 |

### 완료 기준
- FAQ 매칭 정확도 90% 이상
- Gemini 응답에 할루시네이션 없음 (규정에 없는 내용 생성 X)
- 에스컬레이션 적절성 확인 (답변 가능한데 에스컬레이션 하는 경우 최소화)

---

## Phase 5: 파일럿 배포 (Day 14-15)

### 목표
소규모 그룹으로 실사용 테스트 후 안정화

### 작업 항목

| # | 작업 | 산출물 |
|---|------|--------|
| 5-1 | 파일럿 대상 선정 (경영지원 내부 5-10명) | 대상자 목록 |
| 5-2 | 파일럿 안내 (봇 추가 방법, 사용법) | 안내 메시지 |
| 5-3 | 1-2일 파일럿 운영 | 사용 로그 |
| 5-4 | 피드백 수집 + 분석 | 피드백 정리 |
| 5-5 | 피드백 반영 (FAQ 보강, 프롬프트 수정) | 업데이트 |
| 5-6 | 전사 배포 결정 | Go/No-Go 판단 |

### 완료 기준
- 파일럿 그룹 만족도 확인
- 치명적 버그 없음
- FAQ 커버리지 충분

---

## Phase 0: 베이스라인 측정 (Phase 1과 병행)

### 목표
봇 도입 전 현재 상태를 기록하여, 도입 후 효과를 수치로 증명할 수 있는 기준선 확보.

### 작업 항목

| # | 작업 | 담당 | 산출물 |
|---|------|------|--------|
| 0-1 | 경영지원팀에 현재 월간 문의 건수 확인 | 본인 → 경영지원 | 월간 문의 건수 (체감치 OK) |
| 0-2 | 카테고리별 문의 비율 확인 | 본인 → 경영지원 | 인사/총무/회계 비율 |
| 0-3 | 문의 1건당 평균 응대 시간 확인 | 본인 → 경영지원 | 건당 응대 시간 (분) |
| 0-4 | 응대 담당 인원 수 + 시급 환산 | 본인 | 인건비 기준 |
| 0-5 | 임직원 평균 답변 대기 시간 확인 | 본인 → 경영지원 | 대기 시간 |

> **이 데이터가 없으면 ROI를 증명할 수 없다.** Phase 1과 동시에 수집할 것.

---

## Phase 6: 대시보드 구축 + 성과 측정 체계 (Day 16-18)

### 목표
운영 로그 기반 대시보드 구축, 경영지원 본부 전체가 볼 수 있는 성과 모니터링 체계 완성.

### 작업 항목

| # | 작업 | 산출물 |
|---|------|--------|
| 6-1 | 운영로그 시트 생성 + n8n 로깅 노드 추가 | 운영로그 자동 기록 |
| 6-2 | 대시보드_일간 시트 구축 (수식 + 차트) | 일간 대시보드 |
| 6-3 | 대시보드_월간 시트 구축 (수식 + 차트) | 월간 대시보드 |
| 6-4 | 에스컬레이션 TOP 질문 자동 집계 | FAQ 보강 파이프라인 |
| 6-5 | ROI 자동 계산 수식 | 월간 ROI 요약 |
| 6-6 | 시트 권한 설정 (편집/뷰어 분리) | 권한 적용 완료 |

### 완료 기준
- 대시보드에서 일간/월간 자동 처리율, 에스컬레이션 비율 확인 가능
- ROI가 자동 계산되어 표시됨
- 경영지원 본부 전원이 대시보드 접근 가능

---

## 전체 마일스톤 요약

```
Phase 0   ████████░░░░░░░░░░  베이스라인 측정 (Phase 1과 병행)
Day 1-2   ████░░░░░░░░░░░░░░  Phase 1: 인프라 (에코봇)
Day 3-5   ░░░████░░░░░░░░░░░  Phase 2: 데이터 (규정/FAQ)
Day 6-10  ░░░░░░█████░░░░░░░  Phase 3: 핵심 로직 (워크플로우)
Day 11-13 ░░░░░░░░░░░███░░░░  Phase 4: 테스트 + 튜닝
Day 14-15 ░░░░░░░░░░░░░██░░░  Phase 5: 파일럿
Day 16-18 ░░░░░░░░░░░░░░░███  Phase 6: 대시보드 + 성과 측정
```

## 리스크 및 대응

| 리스크 | 영향 | 대응 |
|--------|------|------|
| 네이버웍스 봇 생성 권한 없음 | Phase 1 지연 | IT팀/관리자에게 사전 요청 |
| 규정 데이터 디지털화 지연 | Phase 2 지연 | 핵심 규정 우선 입력, 나머지 운영 중 보강 |
| n8n 외부 접근 불가 (방화벽) | Phase 1 차단 | IT팀에 포트 개방 요청 또는 n8n Cloud 검토 |
| Gemini 응답 품질 미달 | Phase 4 지연 | 프롬프트 반복 튜닝, 규정 데이터 품질 개선 |
| FAQ 커버리지 부족 | 사용자 불만 | 파일럿 피드백으로 지속 보강 |

## Phase 1 시작 전 사전 확인 체크리스트

- [ ] 네이버웍스 Developer Console 접근 권한 확인
- [ ] n8n 서버 접근 권한 + Webhook URL 외부 노출 가능 여부
- [ ] Google AI Studio에서 Gemini API Key 발급 가능 여부
- [ ] Google Sheets API 사용을 위한 Service Account 또는 OAuth 설정
- [ ] 경영지원팀 FAQ 작성 협조 확인
